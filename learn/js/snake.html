<div id="main" class="main">
<div class='line'><div data-n='1' class="0_0 s"></div><div class="0_1"></div><div class="0_2"></div><div class="0_3"></div><div class="0_4"></div><div class="0_5"></div><div class="0_6"></div><div class="0_7"></div><div class="0_8"></div><div class="0_9"></div></div>
<div class="line"><div class="1_0"></div><div class="1_1"></div><div class="1_2"></div><div class="1_3"></div><div class="1_4"></div><div class="1_5"></div><div class="1_6"></div><div class="1_7"></div><div class="1_8"></div><div class="1_9"></div></div><div class="line"><div class="2_0"></div><div class="2_1"></div><div class="2_2"></div><div class="2_3"></div><div class="2_4"></div><div class="2_5"></div><div class="2_6"></div><div class="2_7"></div><div class="2_8"></div><div class="2_9"></div></div>
<div class="line"><div class="3_0"></div><div class="3_1"></div><div class="3_2"></div><div class="3_3"></div><div class="3_4"></div><div class="3_5"></div><div class="3_6"></div><div class="3_7"></div><div class="3_8"></div><div class="3_9"></div></div><div class="line"><div class="4_0"></div><div class="4_1"></div><div class="4_2"></div><div class="4_3"></div><div class="4_4"></div><div class="4_5"></div><div class="4_6"></div><div class="4_7"></div><div class="4_8"></div><div class="4_9"></div></div>
<div class="line"><div class="5_0"></div><div class="5_1"></div><div class="5_2"></div><div class="5_3"></div><div class="5_4"></div><div class="5_5"></div><div class="5_6"></div><div class="5_7"></div><div class="5_8"></div><div class="5_9"></div></div><div class="line"><div class="6_0"></div><div class="6_1"></div><div class="6_2"></div><div class="6_3"></div><div class="6_4"></div><div class="6_5"></div><div class="6_6"></div><div class="6_7"></div><div class="6_8"></div><div class="6_9"></div></div>
<div class="line"><div class="7_0"></div><div class="7_1"></div><div class="7_2"></div><div class="7_3"></div><div class="7_4"></div><div class="7_5"></div><div class="7_6"></div><div class="7_7"></div><div class="7_8"></div><div class="7_9"></div></div><div class="line"><div class="8_0"></div><div class="8_1"></div><div class="8_2"></div><div class="8_3"></div><div class="8_4"></div><div class="8_5"></div><div class="8_6"></div><div class="8_7"></div><div class="8_8"></div><div class="8_9"></div></div>
<div class="line"><div class="9_0"></div><div class="9_1"></div><div class="9_2"></div><div class="9_3"></div><div class="9_4"></div><div class="9_5"></div><div class="9_6"></div><div class="9_7"></div><div class="9_8"></div><div class="9_9"></div></div>
</div>
<style>
.main .line {
    clear: both;
}
.main .line div {
    width: 20px;
    height: 20px;
    float: left;
    margin: 1px;
    border: 1px solid #ddd;
    border-radius: 4px;
    background-color: #fff;
    transition: background-color .5s;
}
.main .line div.s {
    background-color: #bbb;
    transition: background-color .5s;
}
.main .line div.f {
    background-color: green;
    transition: background-color 2s;
}
</style>
<script>

    (function(width, height, length, current, dx, dy, x, y, hasFood, newEl){
        //Создаем функцию и сразу ее выполняем.

//Нумерация клеток идет слева направо, снизу вверх от 1 до 0
document.body.onkeydown = function(e){
    //document - корневой элемент DOM модели
    //body - элемент внутри document, здесь можно убрать
    //onkeydown - событие когда пользователь нажимает кнопку, в данном случае внутри body
    //Это событие = функция, получающая в результате нажатия e
    //e - event. объект DOM
    dx = (e.keyCode - 38) % 2, dy = (e.keyCode - 39) % 2;
    // Это направления движения змейки, а не результат конкретного нажатия.
    //keyCode ---  40 - вниз, 39 - вправо, 38 - вверх, 37 - влево.
    //Для dx находим остаток от деления кода - 38 на 2. Получаем для право 1, для лево -1, для верх и низ 0
    //Для dy находим остаток от деления кода - 39 на 2. Получаем для вниз 1, для вверх -1, для право и лево 0
    //Поскольку dx без var, она глобальная, то есть видна не только в этой функции
    //Каждую секунду будем смещать змейку на dx
};

var timer = setInterval(function () {
    //setInterval Выполняет полученную функцию постоянно, пока не получит clearInterval
    x = (x + dx) < 0 ? width - 1 : (x + dx) % width;

    //Если текущая координата x + смещение < 0, что значит мы на крайнем правом квадрате(0) и движемся влево, то x превращается в 9
    //Иначе, например мы на клетке 8 и движемся влево, то есть dx == -1. Получаем x = 7 % 10 = 7, Если мы на 1 и движемся влево, то x = 0 % 10 = 0
    //Если мы справа(0) и движемся вправо, то (0 + 1) % 10 = 1. Если мы на (9 + 1) % 10, вместо 10 попадаем на 0
    y = (y + dy) < 0 ? height - 1 : (y + dy) % height;
    //Для y аналогично
    newEl = document.getElementsByClassName(y + '_' + x)[0]
    //Получаем div с соответствующими координатами x и y
    if(newEl.className.indexOf('s') > 0) {
        //Если класс новой клетки содержит s, то есть змейка тут
    	clearInterval(timer), alert('Game Over! Score: ' + length)
        //Останавливаем таймер, завершаем игру, сообщаем текущую длину
    };
    if(newEl.className.indexOf('f') > 0) {
        //Если класс новой клетки содержит f, то есть тут еда
    	newEl.className = newEl.className.replace(' f', ''), length++, hasFood = false;
        //Убираем еду с этой клетки, увеличиваем длину(глоб пер), hasFood - глоб переменная - ложь
    }
    newEl.className += ' s', newEl.setAttribute('data-n', current++);
    //Змейка помещается на новый элемент, current - номер хода, увеличивается на 1 после установки divу аттрибута data-n = current
    item = undefined
    min = Infinity
    items = document.getElementsByClassName('s')
    //Получаем все элементы, на которых сейчас змейка
    len = items.length
    //Получаем текущую длину змейки(она уже на 1 больше требуемой)
    for(var i = 0; i < len && len > length; i++){
    //Можно так for(var i = 0, min = Infinity, item, items = document.getElementsByClassName('s'), len = items.length; i < len && len > length; i++)
    // Проходим цикл от нуля до текущей длины змейки(она уже больше требуемой).len > length означает, что мы остановимся,
    //Когда змейка будет занимать количество клеток, равное ее длине
    // i < len чтобы остановиться, когда пройдем все клетки, занимаемые змейкой.
    // len > length для первоначального роста змейки. Изначально length = 5, а len = 0. Пока змейка не занимает больше
    // Необходимого, мы на заходим в цикл для удаления
        if(+items[i].getAttribute('data-n') < min){
            //Плюс впереди означает, что превратим в число
            //Получаем значение аттрибута data-n как число. Если оно меньше минимального, то
            //Минимальное = ему, item = данному элементу
    		min = +items[i].getAttribute('data-n'), item = items[i];
            //Короче говоря, находим элемент с минимальным data-n, самый ранний.
            }
}
    if(!!item) item.className = item.className.replace(' s', '');
    //!!undefined = false;
    //!!элемент = true
    //То есть если item(то, что удаляем) есть, то убираем из ее класса змейку
    //for(var fItem, fX, fY; !hasFood; fX = Math.round(Math.random() * 10 % width), fY = Math.round(Math.random() * 10 % height))
    //Получается, то, в первом блоке цикла - только при старте. То, что во втором - при каждой итерации.
    //Размещаем еду
    while(!hasFood){
        //Пока еда не присутствует на поле
        fX = Math.round(Math.random() * 10 % width)
        //Число (0-1) * 10 = (1 - 10) , округлив 0-10, остаток от деления на ширину будет 1-9. думаю, что тут ошибка
        //Но идея в том, что мы получаем число = 0 - width - 1
        fY = Math.round(Math.random() * 10 % height)
    	if(!!fX && !!fY && document.getElementsByClassName(fY + '_' + fX)[0].className.indexOf('s') < 0){
        //Если координаты для еды установлены и змейка не на них.
    		hasFood = true
            //Еда присутствует на поле
            document.getElementsByClassName(fY + '_' + fX)[0].className += ' f';
            //Помещаем еду

            }
        }
}, 1000);

})(10, 10, 5, 1, 1, 0, 0, 0, false, null);


</script>